<!DOCTYPE html>
<html>
<head>
  <title>Shiny</title>
  <meta charset="utf-8">
  <meta name="description" content="Shiny">
  <meta name="author" content="Stéphane Laurent">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="libraries/widgets/bootstrap/css/bootstrap.css"></link>
<link rel=stylesheet href="libraries/widgets/quiz/css/demo.css"></link>
<link rel=stylesheet href="libraries/widgets/interactive/css/aceeditor.css"></link>
<link rel=stylesheet href="libraries/widgets/nvd3/css/nv.d3.css"></link>
<link rel=stylesheet href="libraries/widgets/nvd3/css/rNVD3.css"></link>
<link rel=stylesheet href="./assets/css/custom.css"></link>
<link rel=stylesheet href="./assets/css/ribbons.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  <script src="libraries/widgets/nvd3/js/jquery-1.8.2.min.js"></script>
<script src="libraries/widgets/nvd3/js/d3.v3.min.js"></script>
<script src="libraries/widgets/nvd3/js/nv.d3.min-new.js"></script>
<script src="libraries/widgets/nvd3/js/fisheye.js"></script>
<script src="libraries/widgets/highcharts/js/jquery-1.9.1.min.js"></script>
<script src="libraries/widgets/highcharts/js/highcharts.js"></script>
<script src="libraries/widgets/highcharts/js/highcharts-more.js"></script>
<script src="libraries/widgets/highcharts/js/exporting.js"></script>


</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <hgroup class="auto-fadein">
    <h1>Shiny</h1>
    <h2>An introductory presentation and a short training</h2>
    <p>Stéphane Laurent<br/>R user</p>
  </hgroup>
  <article></article>  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <article data-timings="">
    <p><img src="assets/img/rstudiologo.png"  style="float:right; padding-right:10px;padding-top:10px"/></p>

<h2>What is Shiny ?</h2>

<div align='center' style='width:100%;margin-left:auto;margin-right:auto;padding-bottom:5px'>
  <img src="assets/img/joecheng.jpeg"/>
</div>

<pre><code class="r">help(package = shiny)
</code></pre>

<pre><code class="r">Description:        Shiny makes it incredibly easy to build interactive web applications
                    with R. Automatic &quot;reactive&quot; binding between inputs and outputs and 
                    extensive pre-built widgets make it possible to build beautiful, 
                    responsive, and powerful applications with minimal effort.
</code></pre>

<div style='float:left;width:48%;'>
  <ul>
<li>Originally created by <em>Joe Cheng</em> </li>
<li>Delivered by <em>RStudio company</em></li>
</ul>

</div>
<div style='float:right;width:48%;'>
  <p><img src="assets/img/foas.jpg" alt="alt text"></p>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h2>Easy example: the standard Gauss distribution</h2>
  </hgroup>
  <article data-timings="">
    <div class="row-fluid">
  <div class="span4">
    <form class="well">
      <label for="title">Title</label>
      <input id="title" type="text" value=""/>
      <div id="color" class="control-group shiny-input-radiogroup">
        <label class="control-label" for="color">Color:</label>
        <label class="radio">
          <input type="radio" name="color" id="color1" value="blue" checked="checked"/>
          <span>blue</span>
        </label>
        <label class="radio">
          <input type="radio" name="color" id="color2" value="red"/>
          <span>red</span>
        </label>
        <label class="radio">
          <input type="radio" name="color" id="color3" value="green"/>
          <span>green</span>
        </label>
      </div>
      <label for="linewidth">Line width</label>
      <input id="linewidth" type="number" value="6"/>
    </form>
  </div>
  <div class="span8">
    <div id="GAUSS" class="shiny-plot-output" style="width: 100% ; height: 400px"></div>
  </div>
</div>

<ul>
<li><p>Left side (<em>sidebar panel</em>) : <strong>inputs</strong> </p></li>
<li><p>Right side (<em>main panel</em>) : <strong>outputs</strong></p></li>
<li><p><em>Engine</em> :  two <strong>R</strong> files, namely <code>ui.R</code> and <code>server.R</code>, generate the app, and <em>reactivity</em> is handled by Javascript</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h2>Goals of this presentation</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>\(\frac12\) presentation, \(\frac12\) training</p></li>
<li><p>Each participant uses its own computer with a recent version of R and peferably RStudio, as well as an appropriate browser: Google Chrome of Firefox </p></li>
<li><p>Intended public: non-proficient R users</p></li>
<li><p>Skills expected after the presentation :</p>

<ul>
<li>Making an easy Shiny app (such as the Gauss app)</li>
<li>Understanding reactivity </li>
<li>Self-improvement of these skills by studying the Shiny tutorial<br></li>
</ul></li>
</ul>

<p><br/> </p>

<p><span style="border-style:solid;border-width:3px;border-color:seaShell;background-color:#FCDFFF;font-size:25px"><em>Warning</em></span>  The examples given in these slides are mainly conceived to illustrate some concepts, and don&#39;t necessarily represent best practices !</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>Shiny app template</h2>
  </hgroup>
  <article data-timings="">
    
<div style='float:left;width:33%;'>
  <p><strong>ui.R :</strong></p>

<pre><code class="r" style="font-size:80%">shinyUI(pageWithSidebar(
  
  headerPanel("app title"),
  
  sidebarPanel(   
    ***SET INPUTS*** 
  ),
   
  mainPanel(    
    ***RENDER OUTPUTS***
  )
  
))
</code></pre>

<ul>
<li><p>Inputs are  elements of the <code>input</code> list </p></li>
<li><p>Outputs are  elements of the <code>output</code> list </p></li>
</ul>

</div>
<div style='float:right;width:66%;'>
  <p><strong>server.R :</strong></p>

<pre><code class="r" style="font-size:80%">shinyServer(function(input, output, session) {

  ***GET INPUTS AND MAKE OUTPUTS*** 
  
})
</code></pre>

<ul>
<li><p><u><em>get input</em></u>:  <span style="border-style:solid;border-width:1px;border-color:yellow"><code>input$title</code></span> (or <span style="border-style:solid;border-width:1px;border-color:yellow"><code>input[[&quot;title&quot;]]</code></span>)</p></li>
<li><p><u><em>set input</em></u>: <strong>not</strong> by doing <span style="border-style:solid;border-width:2px;border-color:red"><code>input$title &lt;- ...</code> </span> !!!</p></li>
</ul>

<p>Inputs are set through the <em>widgets</em> in the interface, defined in <strong>ui.R</strong>:<br>
<span style="border-style:solid;border-width:1px;border-color:yellow"><code>textInput(inputId=&quot;title&quot;, label=&quot;Title&quot;)</code></span> </p>

<ul>
<li><p><u><em>make output</em></u>: <span style="border-style:solid;border-width:1px;border-color:yellow"><code>output$plot &lt;- renderPlot({ ... })</code></span></p></li>
<li><p><u><em>render output</em></u>: <span style="border-style:solid;border-width:1px;border-color:yellow"><code>plotOutput(&quot;plot&quot;)</code></span></p></li>
</ul>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>Available input widgets</h2>
  </hgroup>
  <article data-timings="">
    <hr style="height:10pt; visibility:hidden;"/>

<div style='float:left;width:48%;'>
  <ul>
<li><p><label for="">textInput()</label>
<input id="" type="text" value=""/> </p></li>
<li><p><label for="">numericInput()</label>
<input id="" type="number" value="4"/> </p></li>
<li><p><label>fileInput()</label>
<input id="" type="file"/></p>

<div id="_progress" class="progress progress-striped active shiny-file-input-progress">
<div class="bar"></div>
<label></label>
</div> </li>
<li><p><code>sliderInput()</code> doesn&#39;t work in these slides currently</p></li>
<li><p><a id="" class="btn shiny-download-link" href="" target="_blank">downloadButton()</a></p></li>
</ul>

<hr style="height:5pt; visibility:hidden;"/>

<ul>
<li><button id="" type="button" class="btn action-button">actionButton()</button> </li>
</ul>

</div>
<div style='float:right;width:48%;'>
  <ul>
<li><head>
<script src="shared/datepicker/js/bootstrap-datepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="shared/datepicker/css/datepicker.css"/>
</head>
<div id="" class="shiny-date-input">
<label class="control-label" for="">dateInput()</label>
<input type="text" class="input-medium datepicker" data-date-language="en" data-date-weekstart="0" data-date-format="yyyy-mm-dd" data-date-start-view="month"/>
</div> </li>
</ul>

<p><br/></p>

<ul>
<li><label class="checkbox" for="">
<input id="" type="checkbox"/>
<span>checkboxInput()</span>
</label> </li>
</ul>

<hr style="height:2pt; visibility:hidden;"/>

<ul>
<li><div id="" class="control-group shiny-input-checkboxgroup">
<label class="control-label" for="">checkboxGroupInput()</label>
<label class="checkbox">
<input type="checkbox" name="" id="1" value="A"/>
<span>A</span>
</label>
<label class="checkbox">
<input type="checkbox" name="" id="2" value="B"/>
<span>B</span>
</label>
<label class="checkbox">
<input type="checkbox" name="" id="3" value="C"/>
<span>C</span>
</label>
</div> </li>
</ul>

<hr style="height:3pt; visibility:hidden;"/>

<ul>
<li><label class="control-label" for="">selectInput()</label>
<select id="">
<option value="A" selected="selected">A</option>
<option value="B">B</option>
<option value="C">C</option>
</select> </li>
</ul>

<hr style="height:3pt; visibility:hidden;"/>

<ul>
<li><div id="rrr" class="control-group shiny-input-radiogroup">
<label class="control-label" for="rrr">radioButtons()</label>
<label class="radio">
<input type="radio" name="rrr" id="rrr1" value="A" checked="checked"/>
<span>A</span>
</label>
<label class="radio">
<input type="radio" name="rrr" id="rrr2" value="B"/>
<span>B</span>
</label>
<label class="radio">
<input type="radio" name="rrr" id="rrr3" value="C"/>
<span>C</span>
</label>
</div> </li>
</ul>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>Making the app - step 1: without shiny</h2>
  </hgroup>
  <article data-timings="">
    
<div style='float:left;width:48%;'>
  <ul>
<li>Write regular R code to plot the standard Gauss density: </li>
</ul>

<pre><code class="r">curve(dnorm(x), from = -3, to = 3, 
    main = &quot;standard Gaussian density&quot;, 
    col = &quot;blue&quot;, lwd = 6, axes = FALSE, 
    xlab = NA, ylab = NA)
axis(1)
</code></pre>

<p><img src="assets/fig/unnamed-chunk-6.png" alt="plot of chunk unnamed-chunk-6"> </p>

</div>
<div style='float:right;width:49%;'>
  <p><em>NB:</em> The <code>curve()</code> function is anti-pedagogical: usually <code>dnorm(x)</code> returns the evaluation of the standard Gauss density :</p>

<pre><code class="r">x &lt;- c(0, 1, 2)
dnorm(x)
</code></pre>

<pre><code>## [1] 0.39894 0.24197 0.05399
</code></pre>

<p>But <code>dnorm(x)</code> inside of <code>curve()</code> is an expression written as a function of the <code>x</code> variable.</p>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>Making the app - step 2: embed code in template</h2>
  </hgroup>
  <article data-timings="">
    
<div style='float:left;width:90%;'>
  <p><strong>ui.R :</strong></p>

<pre><code class="r">  sidebarPanel(
    textInput(&quot;title&quot;, &quot;Title&quot;), 
    radioButtons(&quot;color&quot;, &quot;Color:&quot;, choices=c(&quot;blue&quot;,&quot;red&quot;,&quot;green&quot;)), 
    numericInput(&quot;linewidth&quot;, &quot;Line width&quot;, value=6) 
  ),
  mainPanel(
    plotOutput(&quot;GAUSS&quot;)
  )
</code></pre>

<p><strong>server.R :</strong></p>

<pre><code class="r">output$GAUSS &lt;- renderPlot({
    curve(dnorm(x), from = -3, to = 3, main = input$title, col = input$color, 
        lwd = input$linewidth, axes = FALSE, xlab = NA, ylab = NA)
    axis(1)
})
</code></pre>

</div>
<div style='float:right;width:9%;'>
  
</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="middle" id="slide-8" style="background:;">
  <hgroup>
    <h2>Making the app - step 3: run</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>Run by doing <code>runApp(&quot;myappfolder&quot;)</code> where <code>myappfolder</code> is the folder containing <strong>server.R</strong> and <strong>ui.R</strong>, and the current directory is the one containing <code>myappfolder</code></p></li>
<li><p>If <code>shiny</code> is not loaded in your R session, type <code>shiny::runApp(&quot;myappfolder&quot;)</code></p></li>
<li><p>In RStudio just type <code>runApp(&quot;</code> and press <em>Tab</em> to select the folder </p></li>
<li><p>To prevent  the app to be launched in the default browser, type <p align="center"><code>runApp(&quot;myappfolder&quot;, launch.browser=FALSE)</code></p> or, shorter, <code>runApp(&quot;myappfolder&quot;, l=FALSE)</code>; then the app is accessible  at <span style="border-style:solid;border-width:1px;border-color:yellow"><code>http://localhost:xxxx</code></span>  where <code>xxxx</code> is the port given in the <code>runApp()</code> message:</p></li>
</ul>

<p><img alt="runApp" src="assets/img/runApp.png" width="78%"></p>

<ul>
<li>Do not use an old version of Internet Explorer</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>What does <code>runApp()</code> do ?</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>The <strong>ui.R</strong> file generates the html code of the app </p></li>
<li><p>For instance, <code>textInput(&quot;title&quot;,&quot;Title&quot;)</code> generates the following html code: </p></li>
</ul>

<pre><code>&lt;label for=&quot;title&quot;&gt;Title&lt;/label&gt;
&lt;input id=&quot;title&quot; type=&quot;text&quot; value=&quot;&quot;/&gt;
</code></pre>

<p>(try  <code>textInput(&quot;title&quot;,&quot;Title&quot;)</code> in the R console)</p>

<ul>
<li><p>There are some html style files (css) in the <code>shiny</code> package folder, as well as Javascript libraries (js files)</p></li>
<li><p>Javascript handles the connection between R and the interface (the server and the client), namely <em>reactivity</em>; we will see in the next slides how reactivity works</p></li>
<li><p><em>Is it true that using Shiny does not require skills in html/Javascript ?</em> </p>

<ul>
<li>Yes, I am the proof that it&#39;s possible </li>
<li>But such skills are useful for customization </li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>Incredible javascript visualizer: reactlog</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>Type <code>options(shiny.reactlog=TRUE)</code> at the beginning of <strong>server.R</strong>, or before running the app, and press <span style="border-style:solid;border-width:3px;border-color:seaShell;background-color:yellow;font-size:25px"><em>Ctrl+F3</em></span> while the app is running</p></li>
<li><p>It shows the <em>reactive objects</em> constituting the app, and the <em>connections</em> between them</p></li>
</ul>

<p><img alt="Reactive roles" src="assets/img/reactivity_diagrams/roles.png" width="70%"></p>

<ul>
<li>There&#39;s no reactive conductor in the Gauss app, only <em>direct connections</em>:</li>
</ul>

<p><img alt="Simple connections" src="assets/img/reactivity_diagrams/simplest.png" width="40%"></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>Understanding reactivity (1/2)</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>The output object <code>GAUSS</code> is <em>connected</em> to each input object; then it is <em>updated</em> each time an input object is modified </p></li>
<li><p>Let us try to <em>isolate</em> an input: </p></li>
</ul>

<pre><code class="r" style="font-size:80%">  output$GAUSS <- renderPlot({
    curve(dnorm(x), from=-3, to=3, axes=FALSE, xlab=NA, ylab=NA, 
      main=input$title, col=isolate(input$color), lwd=input$linewidth)
    axis(1)
  })
</code></pre>

<div class="row-fluid">
  <div class="span4">
    <form class="well">
      <label for="title2">Title</label>
      <input id="title2" type="text" value=""/>
      <div id="color2" class="control-group shiny-input-radiogroup">
        <label class="control-label" for="color2">Color:</label>
        <label class="radio">
          <input type="radio" name="color2" id="color21" value="blue" checked="checked"/>
          <span>blue</span>
        </label>
        <label class="radio">
          <input type="radio" name="color2" id="color22" value="red"/>
          <span>red</span>
        </label>
        <label class="radio">
          <input type="radio" name="color2" id="color23" value="green"/>
          <span>green</span>
        </label>
      </div>
      <label for="linewidth2">Line width</label>
      <input id="linewidth2" type="number" value="6"/>
    </form>
  </div>
  <div class="span8">
    <div id="GAUSS2" class="shiny-plot-output" style="width: 100% ; height: 400px"></div>
  </div>
</div>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>Understanding reactivity (2/2)</h2>
  </hgroup>
  <article data-timings="">
    
<div class="quiz quiz-multiple well" data-individual>
  <p>What is happening with <code>isolate(input$color)</code> ? </p>

<ol>
<li>${\tt input$color}\,\,\;$ is unmodifiable when we do ${\tt isolate(input$color)}\,\,\,\;$ </li>
<li><em>${\tt output$GAUSS}\,\,\,\;$ is disconnected from ${\tt input$color}\,\,\,\;$</em></li>
<li><em>${\tt output$GAUSS}\,\,\,\;$ reads the value of ${\tt input$color}\,\,\;$ only when it reacts</em></li>
</ol>

  <button class="quiz-submit btn btn-primary">Submit</button>
  <button class="quiz-toggle-hint btn btn-info">Show Hint</button>
  <button class="quiz-show-answer btn btn-success">Show Answer</button>
  <button class="quiz-clear btn btn-danger">Clear</button>
  
  <div class="quiz-hint">
  <p>Look at the reactlog ! </p>

</div>
<div class="quiz-explanation">
  <p>See the Shiny tutorial !</p>

</div>
</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>Action button</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>We can isolate all input parameters of the plot: the user firstly selects the parameters and generates the plot by pressing <button id="" type="button" class="btn action-button">Go!</button> <em>(useful when modifying the inputs generates a time-consuming task)</em></li>
</ul>

<p><strong>ui.R</strong> </p>

<pre><code class="r" style="font-size:80%">  actionButton(inputId="gobutton", label="Go!")
</code></pre>

<p><strong>server.R</strong></p>

<pre><code class="r" style="font-size:80%">  output$GAUSS <- renderPlot({
    input$gobutton # create connection with the Go! button
    curve(dnorm(x), from=-3, to=3, axes=FALSE, xlab=NA, ylab=NA, 
      main=isolate(input$title), col=isolate(input$color), lwd=isolate(input$linewidth))
    axis(1)
  })
</code></pre>

<ul>
<li><p><em>Here the content of <code>input$gobutton</code> has no importance</em>: <u>the important thing is to generate a value that changes at each press</u>; actually <code>input$gobutton</code> initially is 0 and then is incremented at each press </p></li>
<li><p><u><strong>Exercise</strong></u>: modify the app in order that the plot first time appears only once the button has been pressed (see result in next slide)</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2>Gauss app with an action button</h2>
  </hgroup>
  <article data-timings="">
    <div class="row-fluid">
  <div class="span4">
    <form class="well">
      <label for="title3">Title</label>
      <input id="title3" type="text" value=""/>
      <div id="color3" class="control-group shiny-input-radiogroup">
        <label class="control-label" for="color3">Color:</label>
        <label class="radio">
          <input type="radio" name="color3" id="color31" value="blue" checked="checked"/>
          <span>blue</span>
        </label>
        <label class="radio">
          <input type="radio" name="color3" id="color32" value="red"/>
          <span>red</span>
        </label>
        <label class="radio">
          <input type="radio" name="color3" id="color33" value="green"/>
          <span>green</span>
        </label>
      </div>
      <label for="linewidth3">Line width</label>
      <input id="linewidth3" type="number" value="6"/>
    </form>
  </div>
  <div class="span8">
    <button id="gobutton" type="button" class="btn action-button">Go!</button>
    <div id="GAUSS3" class="shiny-plot-output" style="width: 100% ; height: 400px"></div>
  </div>
</div>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h2>Reactive conductors (1/4)</h2>
  </hgroup>
  <article data-timings="">
    
<div style='float:left;width:44%;'>
  <ul>
<li>A reactive conductor is a reactive component lying between a source and an endpoint:</li>
</ul>

<p><img alt="Reactive conductor" src="assets/img/reactivity_diagrams/conductor.png" width="90%"></p>

<ul>
<li><p>It is defined in <strong>server.R</strong> with the <code>reactive({})</code> function</p></li>
<li><p><em>Reactive function</em> is a bad synonym of <em>reactive conductor</em>: similarly to a regular R function,  <code>reactive({})</code> returns a value, but it does not work like a function</p></li>
</ul>

</div>
<div style='float:right;width:53%;'>
  <ul>
<li><em>Illustration</em>: consider an inefficient algorithm calculating the Fibonacci numbers: </li>
</ul>

<pre><code class="r"># Calculate nth number in Fibonacci sequence
fib &lt;- function(n) {
    ifelse(n &lt; 3, 1, fib(n - 1) + fib(n - 2))
}
</code></pre>

<p>Example for \(n=26\,\): </p>

<pre><code class="r">fib(26)
</code></pre>

<pre><code>## [1] 121393
</code></pre>

<p>the computation is slow:</p>

<pre><code class="r">system.time(fib(26))
</code></pre>

<pre><code>##    user  system elapsed 
##    3.31    0.00    3.31
</code></pre>

</div>
<div style='clear:both'>
  
</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-16" style="background:;">
  <hgroup>
    <h2>Reactive conductors (2/4)</h2>
  </hgroup>
  <article data-timings="">
    <p>Let&#39;s make an app returning the n-th Fibonacci number and its inverse:</p>

<div style='float:left;width:56%;'>
  <p><strong>server.R</strong></p>

<pre><code class="r" style="font-size:79%"># Calculate nth number in Fibonacci sequence
fib <- function(n) ifelse(n<3, 1, fib(n-1)+fib(n-2))

shinyServer(function(input, output) {
  output$nthValue    <- renderText({ fib(input$n) })
  output$nthValueInv <- renderText({ 1/fib(input$n) })
})
</code></pre>

</div>
<div style='float:right;width:43%;'>
  <p><strong>ui.R</strong></p>

<pre><code class="r" style="font-size:80%">sidebarPanel(
  numericInput("n", "Enter n:", value=6) 
),
mainPanel(
  h3("n-th Fibonacci number:"),
  textOutput("nthValue"),
  br(),
  h3("inverse n-th Fibonacci number:"),
  textOutput("nthValueInv")
)
</code></pre>

</div>
<div style='clear:both'>
  <div class="row-fluid">
  <div class="span4">
    <form class="well">
      <label for="n">Enter n:</label>
      <input id="n" type="number" value="6"/>
    </form>
  </div>
  <div class="span8">
    <h3>n-th Fibonacci number:</h3>
    <div id="nthValue" class="shiny-text-output"></div>
    <br/>
    <h3>inverse n-th Fibonacci number:</h3>
    <div id="nthValueInv" class="shiny-text-output"></div>
  </div>
</div>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h2>Reactive conductors (3/4)</h2>
  </hgroup>
  <article data-timings="">
    
<div style='float:left;width:48%;'>
  <ul>
<li>The graph of the current app is: </li>
</ul>

<p><img alt="Reactive conductor" src="assets/img/reactivity_diagrams/fib_no_conductor.png" width="95%"></p>

<ul>
<li>The <code>fib()</code> function is run twice:  each reactive endpoint executes <code>fib()</code> whenever it reacts</li>
</ul>

</div>
<div style='float:right;width:48%;'>
  <p>With a reactive conductor we can run <code>fib()</code>  no more times than is absolutely necessary:</p>

<p><img alt="Reactive conductor" src="assets/img/reactivity_diagrams/conductor.png" width="95%"></p>

<p>How ? </p>

<ul>
<li><p>by  executing <code>fib(input$n)</code> in the reactive conductor </p></li>
<li><p>and getting the reactive conductor output in the reactive endpoints</p></li>
</ul>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h2>Reactive conductors (4/4)</h2>
  </hgroup>
  <article data-timings="">
    <p><strong>old server.R :</strong></p>

<pre><code class="r" style="font-size:80%"># Calculate nth number in Fibonacci sequence
fib <- function(n) ifelse(n<3, 1, fib(n-1)+fib(n-2))

shinyServer(function(input, output) {
  output$nthValue    <- renderText({ fib(input$n) })
  output$nthValueInv <- renderText({ 1/fib(input$n) })
})
</code></pre>

<p><br/></p>

<p><strong>new server.R :</strong></p>

<pre><code class="r" style="font-size:80%"># Calculate nth number in Fibonacci sequence
fib <- function(n) ifelse(n<3, 1, fib(n-1)+fib(n-2))

shinyServer(function(input, output) {
  getFib <- reactive({ fib(input$n) })
  output$nthValue <- renderText({ getFib() })
  output$nthValueInv <- renderText({ 1 / getFib() })
})
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h2>Dynamic UI (1/3)</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>In the app below, user uploads a data file and select columns of the dataset</p></li>
<li><p>Thus the UI widgets (<code>selectInput()</code> and <code>actionButton()</code>) are <em>dynamic</em>, not <em>static</em></p></li>
</ul>

<div class="row-fluid">
  <div class="span4">
    <form class="well">
      <label>Upload a CSV file:</label>
      <input id="userfile" type="file"/>
      <div id="userfile_progress" class="progress progress-striped active shiny-file-input-progress">
        <div class="bar"></div>
        <label></label>
      </div>
      <div id="column_selection" class="shiny-html-output"></div>
    </form>
  </div>
  <div class="span8">
    <div id="plot" class="shiny-plot-output" style="width: 100% ; height: 400px"></div>
  </div>
</div>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-20" style="background:;">
  <hgroup>
    <h2>Dynamic UI (2/3)</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>The dynamic UI is made as follows:</li>
</ul>

<div style='float:left;width:65%;'>
  <p><strong>server.R :</strong></p>

<pre><code class="r" style="font-size:78%">output$column_selection <- renderUI({
  dat <- getFile()  ## to be explained below
  if(!is.null(dat)){
    list(
      selectInput("column_x", "Column x:", choices=names(dat)),      
      selectInput("column_y", "Column y:", choices=names(dat)),
      actionButton("gobutton", "Plot!")
    )
  }
})
</code></pre>

</div>
<div style='float:right;width:33%;'>
  <p><strong>ui.R :</strong></p>

<pre><code class="r" style="font-size:78%">uiOutput("column_selection")
</code></pre>

</div>
<div style='clear:both'>
  <ul>
<li>File is got as a dataframe with my <code>getFile()</code> reactive conductor:</li>
</ul>

</div>
<div style='float:left;width:48%;'>
  <p><strong>ui.R :</strong></p>

<pre><code class="r" style="font-size:78%">fileInput("userfile", "Upload a CSV file:")
</code></pre>

</div>
<div style='float:right;width:48%;'>
  <p><strong>server.R :</strong></p>

<pre><code class="r" style="font-size:78%">getFile <- reactive({
  if(!is.null(input$userfile)){
    read.csv(input$userfile$datapath)
  }
})
</code></pre>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-21" style="background:;">
  <hgroup>
    <h2>Dynamic UI (3/3)</h2>
  </hgroup>
  <article data-timings="">
    <p>And finally the plot: </p>

<div style='float:left;width:65%;'>
  <p><strong>server.R :</strong></p>

<pre><code class="r" style="font-size:85%">output$plot <- renderPlot({
  if(!is.null(input$gobutton)){
    dat <- getFile()
    if(input$gobutton==0) return(NULL)
    xname <- input$column_x
    yname <- input$column_y
    plot(x=dat[,xname], y=dat[,yname], xlab=xname, ylab=yname)
  }
})
</code></pre>

</div>
<div style='float:right;width:33%;'>
  <p><strong>ui.R :</strong></p>

<pre><code class="r" style="font-size:85%">plotOutput("plot")
</code></pre>

</div>
<div style='clear:both'>
  
</div>
<div style='float:left;width:;'>
  
</div>
<div style='float:right;width:;'>
  
</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-22" style="background:;">
  <hgroup>
    <h2>Other important Shiny components</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p><code>conditionalPanel()</code> in <strong>ui.R</strong>: to hide/unhide something in the UI</p></li>
<li><p><code>observe({})</code>: this is like <code>reactive({})</code>, but does not return anything </p></li>
<li><p><code>updateXXXInput()</code> in <strong>server.R</strong>: to change the value of the input (<code>updateNumericInput</code>, <code>updateTextInput</code>, ...) </p></li>
<li><p><code>reactiveValues()</code> in <strong>server.R</strong>: similar to a list, but to store reacting values</p></li>
<li><p>the Shiny tutorial on RStudio website (from which I plagiarized the Fibonacci example)</p></li>
<li><p>the Shiny Google group, to get some help</p></li>
<li><p>the <code>shinyIncubator</code> package: unofficial add-ons for Shiny</p></li>
<li><p>the <code>shinyAce</code> package: a cosy text area input/output</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-23" style="background:;">
  <hgroup>
    <h2>New in Shiny : Javascript tables (DataTables library)</h2>
  </hgroup>
  <article data-timings="">
    <p>Currently doesn&#39;t work within these slides</p>

<iframe src="http://glimmer.rstudio.com/yihui/12_datatables/"></iframe>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-24" style="background:;">
  <hgroup>
    <h2>Javascript charts</h2>
  </hgroup>
  <article data-timings="">
    <p>Shiny allows to render the Javascript charts generated by the <code>rCharts</code> package</p>

<div class="row-fluid">
  <div class="span4">
    <form class="well">
      <label class="control-label" for="sex">Choose Sex</label>
      <select id="sex">
        <option value="Male" selected="selected">Male</option>
        <option value="Female">Female</option>
      </select>
      <label class="control-label" for="type">Choose Type</label>
      <select id="type">
        <option value="multiBarChart" selected="selected">multiBarChart</option>
        <option value="multiBarHorizontalChart">multiBarHorizontalChart</option>
      </select>
    </form>
  </div>
  <div class="span8">
    <div id="nvd3plot" class="shiny-html-output nvd3 rChart"></div>
  </div>
</div>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-25" style="background:;">
  <article data-timings="">
    <p><img src="assets/img/ramnath.jpeg"  style="float:right; padding-left:10px;padding-right:1px;padding-top:10px;width:29%"/></p>

<h2>About these slides</h2>

<ul>
<li><p>This HTML5 slide deck has been created with Ramnath Vaidyanathan&#39;s <code>slidify</code> package</p></li>
<li><p>He is also the author or the <code>rCharts</code> package, R package to create interactive javascript visualizations from R, possibly jointly with Shiny</p></li>
</ul>

<h2>Acknowledgements</h2>

<p>I am grateful to Ramnath and to the members of the Shiny Google group for their help </p>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title=''>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Easy example: the standard Gauss distribution'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Goals of this presentation'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Shiny app template'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Available input widgets'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Making the app - step 1: without shiny'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Making the app - step 2: embed code in template'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Making the app - step 3: run'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='What does <code>runApp()</code> do ?'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='Incredible javascript visualizer: reactlog'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='Understanding reactivity (1/2)'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Understanding reactivity (2/2)'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='Action button'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='Gauss app with an action button'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='Reactive conductors (1/4)'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='Reactive conductors (2/4)'>
         16
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='Reactive conductors (3/4)'>
         17
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='Reactive conductors (4/4)'>
         18
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='Dynamic UI (1/3)'>
         19
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='Dynamic UI (2/3)'>
         20
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='Dynamic UI (3/3)'>
         21
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='Other important Shiny components'>
         22
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='New in Shiny : Javascript tables (DataTables library)'>
         23
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title='Javascript charts'>
         24
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title=''>
         25
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  <script src="libraries/widgets/bootstrap/js/bootstrap.min.js"></script>
<script src="libraries/widgets/bootstrap/js/bootbox.min.js"></script>
<script src="libraries/widgets/quiz/js/jquery.quiz.js"></script>
<script src="libraries/widgets/quiz/js/mustache.min.js"></script>
<script src="libraries/widgets/quiz/js/quiz-app.js"></script>
<script src="libraries/widgets/interactive/js/ace/js/ace.js"></script>
<script src="libraries/widgets/interactive/js/interactive.js"></script>

  <script>  
  $(function (){ 
    $("#example").popover(); 
    $("[rel='tooltip']").tooltip(); 
  });  
  </script>  
  
  <script src="shared/shiny.js" type="text/javascript"></script>
  <script src="shared/slider/js/jquery.slider.min.js"></script>
  <script src="shared/bootstrap/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="shared/slider/css/jquery.slider.min.css"></link>
  
  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>
